<!DOCTYPE html>
<html lang="en" class="no-js">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Dice!</title>
      <link rel="stylesheet" type="text/css" href="css/base.css">
      
      <script type="importmap">
         {
          "imports": {
            "three": "https://unpkg.com/three@0.138.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.138.0/examples/jsm/"
          }
         }
       </script>

      <style>
         /* ğŸ”¹ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
         .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
         }
         .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            position: relative;
            text-align: center;
         }
         /* ğŸ”¹ ë‹«ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
         .close-modal-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #ff6666;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: 0.3s;
         }
         .close-modal-btn:hover {
            background: #ff3333;
            transform: scale(1.2);
         }

         /* ğŸ”¹ iframe ìŠ¤íƒ€ì¼ */
         .modal iframe {
            width: 100%;
            height: 400px;
            border: none;
         }
                  /* ğŸ”¹ ëª¨ë‹¬ ë²„íŠ¼ì„ ì™¼ìª½ ì•„ë˜ë¡œ ì´ë™ */
         .open-modal-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #ffcc00;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 9999; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ë¡œ ì˜¤ë„ë¡ ì„¤ì • */
         }
         .open-modal-btn2 {
            position: fixed;
            bottom: 20px;
            left: 270px;
            background-color: #ff4400;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 9999; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ë¡œ ì˜¤ë„ë¡ ì„¤ì • */
         }
         .open-modal-btn:hover {
            background-color: #ff9900;
            transform: scale(1.1);
         }

         /* ì–ì§€ ê²Œì„ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
         #yahtzeeGame {
            display: none;
         }
         #yahtzeeGame table {
            width: 100%;
            border-collapse: collapse;
         }
         #yahtzeeGame th, #yahtzeeGame td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
         }
         #yahtzeeGame th {
            background-color: #f2f2f2;
         }
         #yahtzeeGame .button {
            margin: 5px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
         }
         #yahtzeeGame .button:disabled {
            background-color: #ddd;
         }
         
         #yahtzeeGame2 {
            display: none;
         }
         #yahtzeeGame2 table {
            width: 100%;
            border-collapse: collapse;
         }
         #yahtzeeGame2 th, #yahtzeeGame2 td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
         }
         #yahtzeeGame2 th {
            background-color: #f2f2f2;
         }
         #yahtzeeGame2 .button {
            margin: 5px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
         }
         #yahtzeeGame2 .button:disabled {
            background-color: #ddd;
         }
         /* ëª¨ë‹¬ ë‚´ìš©ì— ìŠ¤í¬ë¡¤ë°” ì¶”ê°€ */
        .modal-content {
            max-height: 80vh; /* ë·°í¬íŠ¸ ë†’ì´ì˜ 80% */
            overflow-y: auto; /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ë°” ì¶”ê°€ */
        }
        /*í„´ ë©”ì„¸ì§€ ìŠ¤íƒ€ì¼*/
        .turnMessage {
            position: fixed; /* position ì†ì„±ì„ fixedë¡œ ì„¤ì • */
            top: 0; /* í™”ë©´ ìƒë‹¨ì— ê³ ì • */
            left: 0; /* í™”ë©´ ì™¼ìª½ì— ê³ ì • */
            width: 100%; /* í™”ë©´ ì „ì²´ ê°€ë¡œ í­ */
            
            z-index: 1000;
        }
        
      </style>
   </head>
   <body>
    <h1 id="turnMessage" class="turnMessage"></h1>
      <main>
         <div class="frame">
            <div class="content">
               <canvas id="canvas"></canvas>
               <div class="ui-controls">
                  <div class="score">
                     Score: <span id="score-result" data-scores=""></span><br>
                     <span id="score-sum"></span>
                  </div>
                  <button id="roll-btn">Throw!</button>
                  <div class="roll-counter">
                     ğŸ² ë‚¨ì€ êµ´ë¦¬ê¸° íšŸìˆ˜: <span id="roll-count-display">3</span>ë²ˆ
                  </div>

                  <button id="save-btn" disabled>Save!</button>
               </div>
            </div>
         </div>
      </main>

      <!-- ëª¨ë‹¬ ì—´ê¸° ë²„íŠ¼ -->
      <button class="open-modal-btn" onclick="openModal()">ğŸ² 1P ì ìˆ˜íŒ</button>
      <!-- ì²« ë²ˆì§¸ ëª¨ë‹¬ ì°½-->
      <div id="gameModal" class="modal">
         <div class="modal-content">
             <button class="close-modal-btn" onclick="closeModal()">âœ–</button>
             <h2><span id="turnDisplay">0</span>ë²ˆì§¸ í„´ ì–ì§€ ê²Œì„</h2>
             <div id="yahtzeeGame">
                 <h1>ì–ì§€ ê²Œì„</h1>
                 <button id="loadScores">ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                 <div id="scoreDisplay"></div>
                 <script type="module">
                 import {
                     displayScores,
                     loadScores
                 } from './js/score.js';
                 document.getElementById('loadScores').addEventListener('click', () => {
                     loadScores();
                 });
                 displayScores();
                 </script>
                 <script type="module">
                 import {
                     updateScoreBoard,
                     scoreCategory
                 } from './js/score.js';

                 
                 
 
                 document.addEventListener('DOMContentLoaded', () => {
                     // ëª¨ë“  ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                     document.querySelectorAll('.category-button').forEach(button => {
                         button.addEventListener('click', () => {
                             // ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ì ìˆ˜ ê³„ì‚° (scoreCategory í•¨ìˆ˜ê°€ ìˆë‹¤ê³  ê°€ì •)
                             scoreCategory(button.id);
                             // ì ìˆ˜íŒ ì—…ë°ì´íŠ¸
                             updateScoreBoard();
                         });
                     });
 
                     // ì´ˆê¸° ì ìˆ˜íŒ ì—…ë°ì´íŠ¸
                     updateScoreBoard();
                 });
                 </script>
 
                 <h3>ì ìˆ˜íŒ</h3>
 
                 <table class="new-score-table">
                     <tr>
                         <th class="left-col">1ì˜ ê°œìˆ˜</th>
                         <td><span id="scoreOnes">0</span></td>
                         <td><button id="ones" class="category-button">ì„ íƒ</button></td>
                         <th class="left-col">Three of a Kind</th>
                         <td><span id="scoreThreeOfAKind">0</span></td>
                         <td><button id="threeOfAKind" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">2ì˜ ê°œìˆ˜</th>
                         <td><span id="scoreTwos">0</span></td>
                         <td><button id="twos" class="category-button">ì„ íƒ</button></td>
                         <th class="left-col">Four of a Kind</th>
                         <td><span id="scoreFourOfAKind">0</span></td>
                         <td><button id="fourOfAKind" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">3ì˜ ê°œìˆ˜</th>
                         <td><span id="scoreThrees">0</span></td>
                         <td><button id="threes" class="category-button">ì„ íƒ</button></td>
                         <th class="left-col">Full House</th>
                         <td><span id="scoreFullHouse">0</span></td>
                         <td><button id="fullHouse" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">4ì˜ ê°œìˆ˜</th>
                         <td><span id="scoreFours">0</span></td>
                         <td><button id="fours" class="category-button">ì„ íƒ</button></td>
                         <th class="left-col">Small Straight</th>
                         <td><span id="scoreSmallStraight">0</span></td>
                         <td><button id="smallStraight" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">5ì˜ ê°œìˆ˜</th>
                         <td><span id="scoreFives">0</span></td>
                         <td><button id="fives" class="category-button">ì„ íƒ</button></td>
                         <th class="left-col">Large Straight</th>
                         <td><span id="scoreLargeStraight">0</span></td>
                         <td><button id="largeStraight" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">6ì˜ ê°œìˆ˜</th>
                         <td><span id="scoreSixes">0</span></td>
                         <td><button id="sixes" class="category-button">ì„ íƒ</button></td>
                         <th class="left-col">Yahtzee</th>
                         <td><span id="scoreYahtzee">0</span></td>
                         <td><button id="yahtzee" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">ìƒë‹¨ ì„¹ì…˜ í•©ê³„</th>
                         <td><span id="upperSectionTotal">0</span></td>
                         <td>-</td>
                         <th class="left-col">Chance</th>
                         <td><span id="scoreChance">0</span></td>
                         <td><button id="chance" class="category-button">ì„ íƒ</button></td>
                     </tr>
                     <tr>
                         <th class="left-col">ë³´ë„ˆìŠ¤(+35)</th>
                         <td><span id="bonus">0</span></td>
                         <td>-</td>
                         <th class="left-col">í•˜ë‹¨ ì„¹ì…˜ ì´ì </th>
                         <td><span id="lowerSectionTotal">0</span></td>
                         <td>-</td>
                     </tr>
                     <tr>
                         <th class="left-col">ìƒë‹¨ ì„¹ì…˜ ì´ì </th>
                         <td><span id="upperSectionGrandTotal">0</span></td>
                         <td>-</td>
                         <th class="left-col">ì´ì </th>
                         <td><span id="grandTotal">0</span></td>
                         <td>-</td>
                     </tr>
                 </table>
 
             </div>
         </div>
     </div>
     <button class="open-modal-btn2" onclick="openModal2()">ğŸ² 2P ì ìˆ˜íŒ</button>

     <!-- ë‘ ë²ˆì§¸ ëª¨ë‹¬ ì°½-->
     <div id="gameModal2" class="modal">
      <div class="modal-content">
          <button class="close-modal-btn" onclick="closeModal2()">âœ–</button>
          <h2><span id="turnDisplay2">0</span>ë²ˆì§¸ í„´ ì–ì§€ ê²Œì„</h2>
          <div id="yahtzeeGame2">
              <h1>ì–ì§€ ê²Œì„</h1>
              <button id="loadScores2">ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°</button>
              <div id="scoreDisplay2"></div>
              <script type="module">
              import {
                  displayScores,
                  loadScores
              } from './js/score.js';
              document.getElementById('loadScores2').addEventListener('click', () => {
                  loadScores();
              });
              displayScores();
              </script>
              <script type="module">
              import {
                  updateScoreBoard,
                  scoreCategory
              } from './js/score.js';

              
             

              document.addEventListener('DOMContentLoaded', () => {
                  // ëª¨ë“  ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                  document.querySelectorAll('.category-button').forEach(button => {
                      button.addEventListener('click', () => {
                          // ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ì ìˆ˜ ê³„ì‚° (scoreCategory í•¨ìˆ˜ê°€ ìˆë‹¤ê³  ê°€ì •)
                          scoreCategory(button.id);
                          // ì ìˆ˜íŒ ì—…ë°ì´íŠ¸
                          updateScoreBoard();
                      });
                  });

                  // ì´ˆê¸° ì ìˆ˜íŒ ì—…ë°ì´íŠ¸
                  updateScoreBoard();
              });
              </script>

              <h3>ì ìˆ˜íŒ</h3>

              <table class="new-score-table">
                  <tr>
                      <th class="left-col">1ì˜ ê°œìˆ˜</th>
                      <td><span id="scoreOnes2">0</span></td>
                      <td><button id="ones2" class="category-button">ì„ íƒ</button></td>
                      <th class="left-col">Three of a Kind</th>
                      <td><span id="scoreThreeOfAKind2">0</span></td>
                      <td><button id="threeOfAKind2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">2ì˜ ê°œìˆ˜</th>
                      <td><span id="scoreTwos2">0</span></td>
                      <td><button id="twos2" class="category-button">ì„ íƒ</button></td>
                      <th class="left-col">Four of a Kind</th>
                      <td><span id="scoreFourOfAKind2">0</span></td>
                      <td><button id="fourOfAKind2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">3ì˜ ê°œìˆ˜</th>
                      <td><span id="scoreThrees2">0</span></td>
                      <td><button id="threes2" class="category-button">ì„ íƒ</button></td>
                      <th class="left-col">Full House</th>
                      <td><span id="scoreFullHouse2">0</span></td>
                      <td><button id="fullHouse2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">4ì˜ ê°œìˆ˜</th>
                      <td><span id="scoreFours2">0</span></td>
                      <td><button id="fours2" class="category-button">ì„ íƒ</button></td>
                      <th class="left-col">Small Straight</th>
                      <td><span id="scoreSmallStraight2">0</span></td>
                      <td><button id="smallStraight2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">5ì˜ ê°œìˆ˜</th>
                      <td><span id="scoreFives2">0</span></td>
                      <td><button id="fives2" class="category-button">ì„ íƒ</button></td>
                      <th class="left-col">Large Straight</th>
                      <td><span id="scoreLargeStraight2">0</span></td>
                      <td><button id="largeStraight2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">6ì˜ ê°œìˆ˜</th>
                      <td><span id="scoreSixes2">0</span></td>
                      <td><button id="sixes2" class="category-button">ì„ íƒ</button></td>
                      <th class="left-col">Yahtzee</th>
                      <td><span id="scoreYahtzee2">0</span></td>
                      <td><button id="yahtzee2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">ìƒë‹¨ ì„¹ì…˜ í•©ê³„</th>
                      <td><span id="upperSectionTotal2">0</span></td>
                      <td>-</td>
                      <th class="left-col">Chance</th>
                      <td><span id="scoreChance2">0</span></td>
                      <td><button id="chance2" class="category-button">ì„ íƒ</button></td>
                  </tr>
                  <tr>
                      <th class="left-col">ë³´ë„ˆìŠ¤(+35)</th>
                      <td><span id="bonus2">0</span></td>
                      <td>-</td>
                      <th class="left-col">í•˜ë‹¨ ì„¹ì…˜ ì´ì </th>
                      <td><span id="lowerSectionTotal2">0</span></td>
                      <td>-</td>
                  </tr>
                  <tr>
                      <th class="left-col">ìƒë‹¨ ì„¹ì…˜ ì´ì </th>
                      <td><span id="upperSectionGrandTotal2">0</span></td>
                      <td>-</td>
                      <th class="left-col">ì´ì </th>
                      <td><span id="grandTotal2">0</span></td>
                      <td>-</td>
                  </tr>
              </table>

          </div>
      </div>
  </div>

      <script>
         function openModal() {
            document.getElementById("gameModal").style.display = "flex";
            document.getElementById("yahtzeeGame").style.display = "block";
         }
         function closeModal() {
            document.getElementById("gameModal").style.display = "none";
            document.getElementById("yahtzeeGame").style.display = "none";
         }
         function openModal2() {
            document.getElementById("gameModal2").style.display = "flex";
            document.getElementById("yahtzeeGame2").style.display = "block";
         }
         function closeModal2() {
            document.getElementById("gameModal2").style.display = "none";
            document.getElementById("yahtzeeGame2").style.display = "none";
         }
      </script>

      
      <script type="module" src="./js/3d_ani.js"></script>
      <script type="module">
         import { savedScores, loadScores } from './js/score.js';
      
         // ğŸ”¹ `savedScores`ë¥¼ `window` ê°ì²´ì— ì¶”ê°€
         window.savedScores = savedScores;
         window.loadScores = loadScores; // `sol.html`ì—ì„œë„ í˜¸ì¶œ ê°€ëŠ¥í•˜ë„ë¡ ë“±ë¡
      
         document.getElementById("loadScores").addEventListener("click", () => {
             console.log("ğŸ”„ ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ í´ë¦­ë¨!");
             loadScores(); // âœ… ì´ì œ UIì— ì ìˆ˜ í‘œì‹œ!
         });
      </script>
      
     <script>
      async function initializeSolPage() {
          console.log("ğŸ”„ game.html ì´ˆê¸°í™” ì¤‘...");
         //  await ensureContractInitialized();
          console.log("âœ… contractê°€ ì´ˆê¸°í™”ë¨.");
      }
  
      initializeSolPage();
  </script>

      
   </body>
</html>
